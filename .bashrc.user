# Only for my lab machine
export LD_LIBRARY_PATH=/usr/local/lib
export CUDA_ROOT=/usr/local/cuda-7.0
export PATH=/usr/kerberos/sbin:/usr/kerberos/bin:/afs/cs/software/sbin:/afs/cs/software/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
# PATH links binary file search
export PATH=${CUDA_ROOT}/bin:$PATH

# Python autocompletion
export PYTHONSTARTUP=~/.pythonrc

# Autocomplete apt-get
if [ -f /etc/bash_completion ] && ! shopt -oq posix; then
    . /etc/bash_completion
fi

# OSG and Collada library
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib64
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib/colladadom/


# Include Anaconda library libhdf5_hl
# export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/chrischoy/anaconda/lib/

# Add CAFFE_ROOT to PATH
export PATH=${CAFFE_ROOT}/build/tools/:$PATH
# COLLADA_DIR 
export COLLADA_DIR=/usr/local/include/colladadom 

# Torch
# export PATH=/afs/cs.stanford.edu/u/chrischoy/torch-distro/install/bin:$PATH
# export LD_LIBRARY_PATH=/afs/cs.stanford.edu/u/chrischoy/torch-distro/install/lib:$LD_LIBRARY_PATH
# export DYLD_LIBRARY_PATH=/afs/cs.stanford.edu/u/chrischoy/torch-distro/install/lib:$DYLD_LIBRARY_PATH

# Find out host name
HOSTNAME=$(hostname)

# PYTHONPATH to be Anaconda
export PYTHONPATH=/home/chrischoy/anaconda/
export CUDNN_PATH=/home/chrischoy/package/cuDNN2/

if [[ $HOSTNAME == "napoli"* ]]; then
  export PYTHONPATH=/scratch/chrischoy/anaconda/
  export CUDNN_PATH=/scratch/chrischoy/cuDNN2/
  export CAFFE_ROOT=/scratch/chrischoy/caffe/
  export LD_LIBRARY_PATH=/scratch/chrischoy/lib/:$LD_LIBRARY_PATH
  export PATH=${CAFFE_ROOT}bin/:$PATH
fi

# Anaconda Path
export PATH=${PYTHONPATH}bin:$PATH
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:${CUDA_ROOT}/lib64:${CUDNN_PATH}

# CAFFE ROOT
export CAFFE_ROOT=/home/chrischoy/package/caffe-3de
# export PYTHONPATH=$PYTHONPATH:${CAFFE_ROOT}/python

export LIBRARY_PATH=$LD_LIBRARY_PATH
export CPATH=${CUDNN_PATH}

if [[ $- =~ "i" ]]; then 
  # Running Reauth if not inside tmux
  if ! { [ "$TERM" = "screen" ] && [ -n "$TMUX" ]; } then
    /afs/cs/software/bin/reauth 
    # echo "running reauth" 
  fi
  # Exec bash if using an interactive shell.
  exec /bin/zsh

  # Colorize the prompt
  export CLICOLOR=1
  export LSCOLORS='gxfxcxdxbxegedabagacad'
  alias ls='ls --color'
  # Custom bash prompt via kirsle.net/wizards/ps1.html
  export PS1="\[$(tput bold)\]\[$(tput setaf 4)\]\t \[$(tput setaf 2)\][\[$(tput setaf 3)\]\u\[$(tput setaf 1)\]@\[$(tput setaf 3)\]\h \[$(tput setaf 6)\]\W\[$(tput setaf 2)\]]\[$(tput setaf 4)\]\\$ \[$(tput sgr0)\]"

fi

# Run reauth everytime you make connection 
# is_reauth_running=0 
# while read -r line 
# do 
#     if [[ $line == *reauth* ]]; then 
#         is_reauth_running=1 
#     fi 
# done <<< $(ps -eo uid,comm | grep $UID | grep reauth) 
# 
# if [ "$is_reauth_running" -gt 0 ] 
# then 
#     if [[ $- =~ "i" ]]; then 
#         echo "already running" 
#     fi
# else
#     /afs/cs/software/bin/reauth
#     if [[ $- =~ "i" ]]; then
#         echo "running reauth"
#     fi
# fi
